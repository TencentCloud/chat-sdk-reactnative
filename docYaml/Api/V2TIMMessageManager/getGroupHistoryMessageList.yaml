type: api
group: messageManager
name: getGroupHistoryMessageList
features: 获取群组历史消息
version: 1.1.1
ignore: false
deprecated:
precautions:
  info:
    - 在网络正常的情况下会拉取最新的云端数据。如果网络出现异常，SDK 会返回本地存储的历史消息。
    - 直播群(AVChatRoom):仅旗舰版支持，可在[控制台](https://console.cloud.tencent.com/im/login-message)开启[直播群新成员查看入群前消息量配置]，支持查看24小时内最多20条消息。
    - 会议群（Meeting）和 社群（Community）默认开启拉取到进群前的历史消息。
    - 好友工作群（Work）和 陌生人社交群（Public）需要前往[控制台](https://console.cloud.tencent.com/im/qun-setting)手动开启。
    - 更多关于群消息的限制，详见 [消息能力差异](https://cloud.tencent.com/document/product/269/1502#.E6.B6.88.E6.81.AF.E8.83.BD.E5.8A.9B.E5.B7.AE.E5.BC.82)
    - 
    - 本地存储的历史消息无时间限制，但云端存储的历史消息有存储时长的限制：
    - 体验版：免费存储 7 天，不支持延长
    - 专业版：免费存储 7 天，支持延长
    - 旗舰版：免费存储 30 条，支持延长
    - 延长历史消息存储时长是增值服务，您可以登录 [即时通信 IM 控制台](https://console.cloud.tencent.com/im) 修改相关配置，具体计费说明请参加 [增值服务资费](https://cloud.tencent.com/document/product/269/11673#zz) 。
    - 富媒体消息（图片、文件、语音等）对应的文件存储时长，与历史消息存储时长保持一致。
    -
    - '[消息存储策略](https://cloud.tencent.com/document/product/269/77540#.E6.B6.88.E6.81.AF.E5.AD.98.E5.82.A8.E7.AD.96.E7.95.A5)'
    - '[常见问题](https://cloud.tencent.com/document/product/269/77542#.E5.B8.B8.E8.A7.81.E9.97.AE.E9.A2.98)'
params:
  - type: string
    required: true
    name: groupID
    description: 群组id
  - type: number
    required: true
    name: count
    description: 拉取消息的个数，不宜太多，会影响消息拉取的速度，这里建议一次拉取 20 个。但是，Web端不能超过15个。
  - type: string
    required: false
    name: lastMsgID
    description: 获取消息的起始消息id，如果传 null，起始消息为会话的最新消息
returnExample: |-
    V2TimValueCallback<V2TimMessage[]>

    {
        code : number
        desc : string
        data : V2TimMessage[]
    }
returnValues:
    - type: number
      name: code
      description: 请求结果[错误码](https://cloud.tencent.com/document/product/269/1671)
    - type: string
      name: desc
      description: 请求结果描述
    - type: '[V2TimMessage]()[]'
      name: data
      description: 获取的群组历史消息
example: true
